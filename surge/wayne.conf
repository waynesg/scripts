#!MANAGED-CONFIG https://raw.githubusercontent.com/waynesg/scripts/main/surge/wayne.conf

# > 参考 https://github.com/scomper/Surge/blob/master/surge3.conf.ini
# > 参考 https://gist.github.com/Blankwonder/dca87b84b1052f4a6a277dce73e9c01a
# > 官方手册 - https://manual.nssurge.com/
# > 理解原理 - https://manual.nssurge.com/book/understanding-surge/cn/
# > 帮助中心 - https://nssurge.zendesk.com/
# > 技术社区 - https://community.nssurge.com
# > Surge 使用手册 - https://surge.mitsea.com/
# By：waynesg

[General]
# --- GENERAL ---
# Enhanced Wi-Fi Assist
wifi-assist = true
# Hybrid Network
all-hybrid = false
# Gaming Optimization
udp-priority = false
# Latency Benchmark
internet-test-url = http://wifi.vivo.com.cn/generate_204
proxy-test-url = http://1.1.1.1/generate_204
test-timeout = 5
# GeoIP Database
geoip-maxmind-url = https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country.mmdb
disable-geoip-db-auto-update = false
ipv6 = true
hide-vpn-icon = true



# --- COMPATIBILITY ---
compatibility-mode = 0
# 跳过代理
skip-proxy = localhost, *.local, injections.adguard.org, local.adguard.org, captive.apple.com, guzzoni.apple.com, 0.0.0.0/8, 10.0.0.0/8, 17.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.168.0.0/16, 192.88.99.0/24, 198.18.0.0/15, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 240.0.0.0/4, 255.255.255.255/32
exclude-simple-hostnames = true

# --- DNS ---
# The IP addresses of upstream DNS servers
read-etc-hosts = true
use-local-host-item-for-proxy = true
encrypted-dns-follow-outbound-mode = false
include-all-networks = false

# --- ROUTING ---
include-local-networks = false
loglevel = notify

# --- ADVANCED ---
show-error-page-for-reject = true
always-real-ip = link-ip.nextdns.io, *.msftconnecttest.com, *.msftncsi.com, *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com, *.logon.battlenet.com.cn, *.logon.battle.net, stun.l.google.com
hijack-dns = 8.8.8.8:53, 8.8.4.4:53
force-http-engine-hosts = *.ott.cibntv.net, 123.59.31.1,119.18.193.135, 122.14.246.33, 175.102.178.52, 116.253.24.*, 175.6.26.*, 220.169.153.*
use-default-policy-if-wifi-not-primary = false
udp-policy-not-supported-behaviour = REJECT
ipv6-vif = auto
dns-server = system

#[SSID Setting]
#SSID:WiFi@1803@5G suspend=true
#SSID:WAYNE@NETGEAR_5G suspend=true

[Proxy]

[Rule]
FINAL,DIRECT


[URL Rewrite]
# > Redirect Google Search Service
^https?:\/\/(www.)?(g|google)\.cn https://www.google.com 302
# > Redirect Google Maps Service
^https?:\/\/(ditu|maps).google\.cn https://maps.google.com 302
# > Redirect HTTP to HTTPS
^https?:\/\/(www.)?taobao\.com\/ https://taobao.com/ 302
^https?:\/\/(www.)?jd\.com\/ https://www.jd.com/ 302
^https?:\/\/(www.)?mi\.com\/ https://www.mi.com/ 302
^https?:\/\/you\.163\.com\/ https://you.163.com/ 302
^https?:\/\/(www.)?suning\.com\/ https://suning.com/ 302
^https?:\/\/(www.)?yhd\.com\/ https://yhd.com/ 302
# > AbeamTV header
^https?:\/\/api\.abema\.io\/v\d\/ip\/check - reject
# > CUSTOM URL header




[Script]
#Sub-Store Core=type=http-request,pattern=^https?:\/\/sub\.store\/((download)|api\/(preview|sync|(utils\/node-info))),script-path=https://github.com/sub-store-org/Sub-Store/releases/latest/download/sub-store-1.min.js,requires-body=true,timeout=120
#Sub-Store Simple=type=http-request,pattern=^https?:\/\/sub\.store,script-path=https://github.com/sub-store-org/Sub-Store/releases/latest/download/sub-store-0.min.js,requires-body=true
#Sub-Store Sync=type=cron,cronexp=0 0 * * *,wake-system=1,timeout=120,script-path=https://github.com/sub-store-org/Sub-Store/releases/latest/download/cron-sync-artifacts.min.js
#Rewrite: BoxJs = type=http-request,pattern=https?:\/\/boxjs\.(com|net),script-path=https://raw.githubusercontent.com/chavyleung/scripts/master/box/chavy.boxjs.js, requires-body=true, timeout=120
#SSID=type=rule,script-path=https://raw.githubusercontent.com/Peng-YM/QuanX/master/Tasks/box.js.json
酷我音乐 VIP = type=http-response,pattern=^https?:\/\/vip1\.kuwo\.cn\/(vip\/v2\/user\/vip|vip\/spi/mservice),requires-body=1,max-size=0,timeout=60,script-path=https://raw.githubusercontent.com/NobyDa/Script/master/Surge/JS/Kuwo.js,script-update-interval=0
淘票票豆瓣评分 = type=http-response, requires-body=1, pattern=^https:\/\/guide-acs\.m\.taobao\.com\/gw\/mtop\.film\.mtopshowapi\.getextendshowbyid, script-path=https://raw.githubusercontent.com/Peng-YM/QuanX/master/Rewrites/TaoPiaoPiao/taopiaopiao.js
哔哩哔哩_解锁大会员画质 = type=http-response,pattern=https:\/\/ap(p|i)\.bilibili\.com\/((pgc\/player\/api\/playurl)|(x\/v2\/account\/myinfo\?)|(x\/v2\/account/mine\?)),requires-body=true,script-path=https://github.com/Sunert/Script/raw/master/Script/Bilibili/BiliHD.js
美图秀秀VIP = type=http-response,pattern=^https?:\/\/(h5|api)\.xiuxiu\.meitu\.com\/v\d\/(h\d\/vip|vip|user)\/,requires-body=1,script-path=https://raw.githubusercontent.com/I-am-R-E/QuantumultX/main/JavaScript/MeiTuXiuXiu.js
百度搜索防跳转 = type=http-response,pattern=^https?\:\/\/boxer\.baidu\.com\/scheme,script-path=https://raw.githubusercontent.com/app2smile/rules/master/js/baidu-no-redirect.js

[Header Rewrite]
^https?:\/\/.*\.zhihu\.com\/(question|topic) header-replace User-Agent "osee2unifiedRelease/4432 osee2unifiedReleaseVersion/7.8.0 Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mo    bile/15E148"

[MITM]
skip-server-cert-verify = true
tcp-connection = true
h2 = true
hostname = sub.store, h5.xiuxiu.meitu.com, api.xiuxiu.meitu.com, boxer.baidu.com, boxjs.com, boxjs.net
ca-passphrase = 791A1CFF
ca-p12 = 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
